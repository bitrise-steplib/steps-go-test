title: Go test
summary: Runs Go test
description: |-
  Runs Go tests:

  `go test -race -coverprofile="${CODE_COV_TXT_REPORT_FILE}" -covermode=atomic <packages>`

  `go tool cover -html "${CODE_COV_TXT_REPORT_FILE}" -o "${CODE_COV_HTML_REPORT_FILE}"`

website: https://github.com/bitrise-steplib/steps-go-test
source_code_url: https://github.com/bitrise-steplib/steps-go-test
support_url: https://github.com/bitrise-steplib/steps-go-test/issues

type_tags:
  - test

is_requires_admin_user: true
is_always_run: false
is_skippable: false
run_if: ""

toolkit:
  go:
    package_name: github.com/bitrise-steplib/steps-go-test

inputs:
- packages: ./...
  opts:
    title: Go test target packages
    summary: List of Go packages to test.
    description: |-
      Space separated list of Go packages, to run the Go test command against.

      __Example:__

      ```
      github.com/my/step github.com/bitrise/step/tool
      ```
outputs:
- GO_CODE_COV_HTML_REPORT_FILE:
  opts:
    title: Code coverage HTML report file
    summary: Code coverage HTML report file.
    description: Code coverage HTML report file, which contains each package's code coverage report.
- GO_CODE_COV_TXT_REPORT_FILE:
  opts:
    title: Code coverage TXT report file path
    summary: Code coverage TXT report file.
    description: Code coverage TXT report file, which contains each package's code coverage report.
